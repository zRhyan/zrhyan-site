---
// src/components/Header.astro


---

<header class="gradient-border bg-black py-4 text-white dark:bg-white dark:text-black">
  <!-- CONTAINER -->
  <!-- Tailwind classes used in <div> below.
  max-w-6xl =
  max-width: 72rem;

  mx-auto =
  margin-left: auto;
  margin-right: auto;

  flex =
  display: flex;

  justify-between =
  justify-content:
  --> 
  <div class="mx-auto flex max-w-6xl items-center justify-between px-4">
    <!-- Logo -->
    <a href="/">
      <img
        src="/logos/logo.png"
        alt="Rhyan’s logo"
        class="h-10 dark:hidden"
        width="160"
        height="40"
      />
      <img
        src="/logos/logo-black.png"
        alt="Rhyan’s logo"
        class="hidden h-10 dark:block"
        width="160"
        height="40"
      />
    </a>

    <!-- Hamburger -->
    <button
      id="hamburger"
      class="ml-auto h-8 w-8 md:hidden"
      aria-label="Open menu"
      aria-expanded="false"
    >
      <svg
        viewBox="0 0 24 24"
        class="h-full w-full fill-white dark:fill-black"
      >
        <path
          d="M4 6h16M4 12h16M4 18h16"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-width="2"
        />
      </svg>
    </button>

    <!-- Desktop nav -->
    <nav
      id="desktop-nav"
      class="hidden items-center gap-6 md:flex md:flex-grow md:justify-center"
    >
      <a href="/" class="hover:text-secondary">Home</a>
      <a href="/posts" class="hover:text-secondary">Posts</a>
      <a href="/about" class="hover:text-secondary">About Me</a>
    </nav>

    <!-- Social Icons + Theme Toggle -->
    <div class="hidden items-center gap-4 md:flex z-10">
      <a href="https://x.com/zzzRhYaN" aria-label="X / Twitter">
        <img src="/logo-x-white.svg" class="h-5 w-5 dark:hidden" />
        <img src="/logo-x-black.png" class="hidden h-5 w-5 dark:block" />
      </a>
      <a href="https://github.com/zRhyan" aria-label="GitHub">
        <img src="/logo-github-white.svg" class="h-5 w-5 dark:hidden" />
        <img src="/logo-github-black.svg" class="hidden h-5 w-5 dark:block" />
      </a>
      <a href="https://www.linkedin.com/in/zrhyan/" aria-label="LinkedIn">
        <img src="/logo-In-white.png" class="h-5 w-5 dark:hidden" />
        <img src="/logo-In-black.png" class="hidden h-5 w-5 dark:block" />
      </a>
      <a href="https://www.youtube.com/@0rhyan" aria-label="YouTube">
        <img src="/logo-yt-white.svg" class="h-5 w-5 dark:hidden" />
        <img src="/logo-yt-black.svg" class="hidden h-5 w-5 dark:block" />
      </a>

      <!-- Theme toggle button -->
      <button
        id="theme-toggle"
        aria-label="Toggle Dark/Light Mode"
        class="relative flex h-6 w-6 items-center justify-center cursor-pointer"
      >
        <!-- Sun icon -->
        <svg
          id="icon-sun"
          class="absolute h-5 w-5 text-yellow-400 dark:hidden"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M12 4.75a7.25 7.25 0 110 14.5 7.25 7.25 0 010-14.5zM12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"
          />
        </svg>

        <!-- Moon icon -->
        <svg
          id="icon-moon"
          class="absolute hidden h-5 w-5 text-white dark:block"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile menu -->
  <nav
    id="mobile-menu"
    class="hidden flex-col gap-4 bg-black px-4 py-6 text-white dark:bg-white dark:text-black md:hidden"
  >
    <a href="/" class="hover:text-secondary">Home</a>
    <a href="/posts" class="hover:text-secondary">Posts</a>
    <a href="/about" class="hover:text-secondary">About Me</a>
  </nav>

  <!-- JavaScript for Skeleton Loading, Hamburger Menu, and Theme Toggle -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Skeleton loading
      const skeletons = document.querySelectorAll("[data-astro-skeleton]");
      const content = document.querySelector("[data-astro-content]");
      setTimeout(() => {
        skeletons.forEach((el) => el.classList.add("hidden"));
        if (content) content.classList.remove("hidden");
      }, 1000);

      // Hamburger menu toggle
      const burger = document.getElementById("hamburger");
      const mobMenu = document.getElementById("mobile-menu");
      burger?.addEventListener("click", () => {
        if (mobMenu) {
          const isOpen = !mobMenu.classList.contains("hidden");
          mobMenu.classList.toggle("hidden");
          burger.setAttribute("aria-expanded", (!isOpen).toString());
        }
      });

      // Theme toggle
      const btn = document.getElementById("theme-toggle");
      const root = document.documentElement;
      const sun = document.getElementById("icon-sun");
      const moon = document.getElementById("icon-moon");

      function setIcons(isDark) {
        if (!sun || !moon) return;
        sun.classList.toggle("hidden", isDark);
        moon.classList.toggle("hidden", !isDark);
      }

      const currentPrefersDark = () =>
        root.classList.contains("dark");

      setIcons(currentPrefersDark());

      btn?.addEventListener("click", () => {
        const isDark = root.classList.toggle("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
        setIcons(isDark);
      });

      // Initial theme from localStorage
      const savedTheme = localStorage.getItem("theme");
      const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      if (savedTheme === "dark" || (!savedTheme && prefersDark)) {
        root.classList.add("dark");
      }
    });
  </script>
</header>
