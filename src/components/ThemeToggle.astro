---
// src/components/ThemeToggle.astro
---

<button
  id="theme-toggle"
  aria-label="Toggle dark mode"
  class="flex h-10 w-10 items-center justify-center rounded-full
         bg-gray-300 text-gray-700 shadow-lg transition-colors duration-200
         hover:ring-2 hover:ring-primary cursor-pointer
         dark:bg-gray-800 dark:text-white"
>
  <!-- Light theme icon (sun) — show when light -->
  <svg
    id="icon-sun"
    class="h-5 w-5 text-yellow-400 dark:hidden"
    fill="currentColor"
    viewBox="0 0 24 24"
  >
    <path d="M12 4.75a7.25 7.25 0 110 14.5 7.25 7.25 0 010-14.5zM12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M17.66 6.34l1.42-1.42M4.92 19.08l1.42-1.42"/>
  </svg>

  <!-- Dark theme icon (moon) — show when dark -->
  <svg
    id="icon-moon"
    class="hidden h-5 w-5 dark:block text-white"
    fill="currentColor"
    viewBox="0 0 24 24"
  >
    <path d="M21.75 15.5a9 9 0 01-11.25-11A9 9 0 1021.75 15.5z"/>
  </svg>
</button>

<script is:inline>
  const button = document.getElementById('theme-toggle');
  const root = document.documentElement;

  // Toggle theme and store preference
  button?.addEventListener('click', () => {
    const isDark = root.classList.toggle('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  });

  // Apply saved theme on load
  document.addEventListener('DOMContentLoaded', () => {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      root.classList.add('dark');
    } else {
      root.classList.remove('dark');
    }
  });
</script>

